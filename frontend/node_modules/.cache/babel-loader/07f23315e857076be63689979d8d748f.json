{"ast":null,"code":"import _slicedToArray from\"/Users/macbook/Documents/Traversy ProShop Mern tut/propshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory}from'react-router-dom';import{Form,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../Message';import Loader from'../Loader';import{getUserDetails,updateUserProfile}from'../../actions/userAction';var ProfileScreen=function ProfileScreen(_ref){var history=_ref.history;//Router Hooks\nvar _useHistory=useHistory(),push=_useHistory.push;//State\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var dispatch=useDispatch();var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userLogin=useSelector(function(state){return state.userDetails;});var userInfo=userLogin.userInfo;var userUpdateProfile=useSelector(function(state){return state.userUpdateProfile;});var success=userUpdateProfile.success;useEffect(function(){if(!userInfo===0){push('/login');}else{if(!user||!user.name){dispatch(getUserDetails('profile'));}else{setName(user.name);setEmail(user.email);}}},[dispatch,push,userInfo,user]);var submitHandler=function submitHandler(e){e.preventDefault();if(password!==confirmPassword){setMessage('Passwords do not match');}else{dispatch(updateUserProfile({id:user._id,name:name,email:email,password:password}));}};return/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(\"h2\",null,\"User Profile\"),message&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},message),success&&/*#__PURE__*/React.createElement(Message,{variant:\"success\"},\"Profile Updated\"),error&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error),loading&&/*#__PURE__*/React.createElement(Loader,null),/*#__PURE__*/React.createElement(Form,{onSubmit:submitHandler},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"name\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"name\",placeholder:\"Enter name\",autoComplete:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"email\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email Address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"Enter email\",autoComplete:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"password\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Enter password\",autoComplete:\"current-password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"confirmPassword\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Confirm password\",autoComplete:\"current-password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"primary\"},\"Update\"))),/*#__PURE__*/React.createElement(Col,{md:9},/*#__PURE__*/React.createElement(\"h2\",null,\"My Orders\")));};export default ProfileScreen;","map":{"version":3,"sources":["/Users/macbook/Documents/Traversy ProShop Mern tut/propshop/frontend/src/components/screens/ProfileScreen.js"],"names":["React","useState","useEffect","useHistory","Form","Button","Row","Col","useDispatch","useSelector","Message","Loader","getUserDetails","updateUserProfile","ProfileScreen","history","push","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","dispatch","userDetails","state","loading","error","user","userLogin","userInfo","userUpdateProfile","success","submitHandler","e","preventDefault","id","_id","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useHistory} from 'react-router-dom'\nimport { Form, Button, Row, Col } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from '../Message'\nimport Loader from '../Loader'\nimport { getUserDetails, updateUserProfile } from '../../actions/userAction'\n\nconst ProfileScreen = ({history}) => {\n\t//Router Hooks\n\tconst {push} = useHistory()\n\t//State\n\tconst [name, setName] = useState('')\n\tconst [email, setEmail] = useState('')\n\tconst [password, setPassword] = useState('')\n\tconst [confirmPassword, setConfirmPassword] = useState('')\n\tconst [message, setMessage] = useState(null)\n\n\tconst dispatch = useDispatch()\n\n\tconst userDetails = useSelector((state) => state.userDetails)\n\tconst { loading, error, user } = userDetails\n\tconst userLogin = useSelector((state) => state.userDetails)\n    const { userInfo } = userLogin\n    const userUpdateProfile = useSelector((state) => state.userUpdateProfile)\n  const { success } = userUpdateProfile\n\n  useEffect(() => {\n    if (!userInfo===0) {\n      push('/login')\n    } else {\n      if (!user || !user.name) {\n        dispatch(getUserDetails('profile'))\n      } else {\n        setName(user.name)\n        setEmail(user.email)\n      }\n    }\n  }, [dispatch, push, userInfo, user])\n\n  const submitHandler = (e) => {\n    e.preventDefault()\n    if (password !== confirmPassword) {\n      setMessage('Passwords do not match')\n    } else {\n      dispatch(updateUserProfile({ id: user._id, name, email, password }))\n    }\n  }\n\treturn (\n\t\t<Row>\n            <Col md={3}>\n            <h2>User Profile</h2>\n                {message && <Message variant='danger'>{message}</Message>}\n                {success && <Message variant='success'>Profile Updated</Message>}\n\t\t\t\t{error && <Message variant='danger'>{error}</Message>}\n\t\t\t\t{loading && <Loader />}\n\t\t\t\t<Form onSubmit={submitHandler}>\n\t\t\t\t\t<Form.Group controlId='name'>\n\t\t\t\t\t\t<Form.Label>Name</Form.Label>\n\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\ttype='name'\n\t\t\t\t\t\t\tplaceholder='Enter name'\n\t\t\t\t\t\t\tautoComplete='name'\n\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\tonChange={(e) => setName(e.target.value)}\n\t\t\t\t\t\t></Form.Control>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t\t<Form.Group controlId='email'>\n\t\t\t\t\t\t<Form.Label>Email Address</Form.Label>\n\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\tplaceholder='Enter email'\n\t\t\t\t\t\t\tautoComplete='email'\n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\t></Form.Control>\n\t\t\t\t\t</Form.Group>\n\n\t\t\t\t\t<Form.Group controlId='password'>\n\t\t\t\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tplaceholder='Enter password'\n\t\t\t\t\t\t\tautoComplete='current-password'\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\t></Form.Control>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t\t<Form.Group controlId='confirmPassword'>\n\t\t\t\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tplaceholder='Confirm password'\n\t\t\t\t\t\t\tautoComplete='current-password'\n\t\t\t\t\t\t\tvalue={confirmPassword}\n\t\t\t\t\t\t\tonChange={(e) => setConfirmPassword(e.target.value)}\n\t\t\t\t\t\t></Form.Control>\n\t\t\t\t\t</Form.Group>\n\n\t\t\t\t\t<Button type='submit' variant='primary'>\n\t\t\t\t\t\tUpdate\n\t\t\t\t\t</Button>\n\t\t\t\t</Form>\n\t\t\t</Col>\n\t\t\t<Col md={9}>\n\t\t\t\t<h2>My Orders</h2>\n\t\t\t</Col>\n\t\t</Row>\n\t)\n}\n\nexport default ProfileScreen\n"]},"metadata":{},"sourceType":"module"}