{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Documents/Traversy ProShop Mern tut/propshop/frontend/src/components/screens/CartScreen.js\";\nimport React, { useEffect } from 'react';\nimport { Link, useHistory, useLocation, useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Row, Card, Col, Image, Form, ListGroup, Button } from 'react-bootstrap';\nimport { addToCart, removeFromCart } from '../../actions/cartActions';\nimport Message from '../Message';\n\nconst CartScreen = () => {\n  //Router hooks\n  const {\n    id\n  } = useParams();\n  const location = useLocation();\n  const history = useHistory(); //Get qty\n\n  const qty = location.search ? Number(location.search.split('=')[1]) : 1; //Use redux\n\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart);\n  const {\n    cartItems\n  } = cart;\n  useEffect(() => {\n    if (id) {\n      dispatch(addToCart(id, qty));\n    }\n  }, [id, dispatch, qty]); //Remove product from cart\n\n  const removeFromCartHandler = id => {\n    dispatch(removeFromCart(id));\n  }; //Go to login or shipping\n\n\n  const checkoutHandler = () => {\n    history.push(`/login?redirect/shipping`);\n  };\n\n  return /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, \"Shopping Cart\"), cartItems.length === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 33\n    }\n  }, \"Your cart is empty \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 61\n    }\n  }, \"Go back\")) : /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 12\n    }\n  }, cartItems.map(item => /*#__PURE__*/React.createElement(ListGroup.Item, {\n    key: item.product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: item.image,\n    alt: item.name,\n    fluid: true,\n    rounded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item.product}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(Col, {\n    md: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 15\n    }\n  }, \"\\xA3 \", item.price), /*#__PURE__*/React.createElement(Col, {\n    md: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    value: item.qty,\n    onChange: e => dispatch(addToCart(item.product, Number(e.target.value))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }, [...Array(item.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 23\n    }\n  }, x + 1)))), /*#__PURE__*/React.createElement(Col, {\n    md: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    variant: \"light\",\n    onClick: () => removeFromCartHandler(item.product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-trash\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 19\n    }\n  })))))))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \"Subtotal (\", cartItems.reduce((acc, current) => acc + current.qty, 0), \") Items\"), \"\\xA3 \", cartItems.reduce((acc, current) => acc + current.qty * current.price, 0).toFixed(2)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn-block\",\n    disabled: true,\n    onClick: checkoutHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Checkout\"))))));\n};\n\nexport default CartScreen;","map":{"version":3,"sources":["/Users/macbook/Documents/Traversy ProShop Mern tut/propshop/frontend/src/components/screens/CartScreen.js"],"names":["React","useEffect","Link","useHistory","useLocation","useParams","useDispatch","useSelector","Row","Card","Col","Image","Form","ListGroup","Button","addToCart","removeFromCart","Message","CartScreen","id","location","history","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","checkoutHandler","push","length","map","item","product","image","name","price","e","target","value","Array","countInStock","keys","x","reduce","acc","current","toFixed"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { Link, useHistory, useLocation, useParams } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Row, Card, Col, Image, Form, ListGroup, Button } from 'react-bootstrap'\nimport { addToCart, removeFromCart } from '../../actions/cartActions'\nimport Message from '../Message'\n\nconst CartScreen = () => {\n  //Router hooks\n  const { id } = useParams()\n  const location = useLocation()\n  const history = useHistory()\n  //Get qty\n  const qty = location.search ? Number(location.search.split('=')[1]) : 1\n  //Use redux\n  const dispatch = useDispatch()\n  const cart = useSelector(state => state.cart)\n  const { cartItems } = cart\n\n  useEffect(() => {\n    if (id) {\n      dispatch(addToCart(id, qty))\n    }\n  }, [id, dispatch, qty])\n  //Remove product from cart\n  const removeFromCartHandler = (id) => {\n    dispatch(removeFromCart(id))\n  }\n  //Go to login or shipping\n  const checkoutHandler = () => {\n    history.push(`/login?redirect/shipping`)\n  }\n  return <Row>\n    <Col md={8}>\n      <h1>Shopping Cart</h1>\n      {cartItems.length === 0 ? <Message>Your cart is empty <Link to='/'>Go back</Link></Message>\n        : (<ListGroup variant='flush'>\n          {cartItems.map(item => (<ListGroup.Item key={item.product}>\n            <Row>\n              <Col md={2}>\n                <Image src={item.image} alt={item.name} fluid rounded />\n              </Col><Col md={3}>\n                <Link to={`/product/${item.product}`}>{item.name}</Link>\n              </Col>\n              <Col md={2}>£ {item.price}</Col>\n              <Col md={2}>\n                <Form.Control\n                  as='select'\n                  value={item.qty}\n                  onChange={(e) => dispatch(addToCart(item.product, Number(e.target.value)))}\n                >\n                  {[...Array(item.countInStock).keys()].map(\n                    (x) => (\n                      <option key={x + 1} value={x + 1}>\n                        {x + 1}\n                      </option>\n                    )\n                  )}\n                </Form.Control>\n              </Col>\n              <Col md={2}>\n                <Button type=\"button\" variant='light' onClick={() => removeFromCartHandler(item.product)}>\n                  <i className=\"fas fa-trash\"></i>\n                </Button>\n              </Col>\n            </Row>\n          </ListGroup.Item>))}\n        </ListGroup>)}\n    </Col>\n    <Col><Card><ListGroup variant='flush'>\n      <ListGroup.Item>\n        <h2>Subtotal ({cartItems.reduce((acc, current) => acc + current.qty, 0)}) Items</h2>\n                    £ {cartItems.reduce((acc, current) => acc + current.qty * current.price, 0).toFixed(2)}\n      </ListGroup.Item>\n      <ListGroup.Item>\n        <Button type='button' className='btn-block' disabled={true} onClick={checkoutHandler}>\n          Checkout\n                    </Button>\n      </ListGroup.Item>\n    </ListGroup>\n    </Card></Col>\n  </Row>\n}\n\nexport default CartScreen\n"]},"metadata":{},"sourceType":"module"}